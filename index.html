<!DOCTYPE html>
<html>
  <head>
    <base target="_top" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>GST Leave Management</title>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />

<style>
  body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    display: flex;
    height: 100vh;
    background-color: #f9fafb;
    color: #1e293b;
  }

  /* Sidebar */
  .sidebar {
    width: 250px;
    background-color: #000000;
    display: flex;
    flex-direction: column;
    padding: 20px;
    color: #ffffff;
  }

  .user-profile {
    text-align: center;
    margin-bottom: 40px;
  }

  .user-icon {
    width: 72px;
    height: 72px;
    border-radius: 50%;
    background-color: #3b82f6;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    font-weight: 600;
    color: #ffffff;
    margin: 0 auto 10px;
  }

  .user-email {
    font-size: 14px;
    color: #dbeafe;
    word-break: break-word;
  }

  .menu {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .menu li {
    padding: 10px 16px;
    border-radius: 8px;
    margin-bottom: 10px;
    cursor: pointer;
    transition: background 0.2s;
    font-weight: 500;
    color: #e0f2fe;
  }

  .menu li:hover,
  .menu li.active {
    background-color: #3b82f6;
    color: #ffffff;
  }

  .main {
    flex: 1;
    padding: 32px;
    overflow-y: auto;
    background-color: #f9fafb;
  }

  .cards {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 40px;
  }

  .card {
    flex: 1 1 240px;
    background: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 24px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
    transition: box-shadow 0.2s ease;
    text-align: center;
  }

  .card:hover {
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
  }

  .card h2 {
    margin: 0;
    font-size: 2rem;
    color: #1e3a8a;
  }

  .card p {
    color: #64748b;
    margin-top: 6px;
    font-size: 0.95rem;
  }

  .leave-history {
    background: #ffffff;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    padding: 24px;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04);
    overflow-x: auto;
  }

  .leave-history h3 {
    margin-top: 0;
    font-size: 1.25rem;
    color: #1e293b;
    font-weight: 600;
  }

  .leave-history table {
    width: 100%;
    min-width: 700px;
    border-collapse: collapse;
    margin-top: 16px;
  }

  .leave-history th,
  .leave-history td {
    text-align: left;
    padding: 12px;
    border-bottom: 1px solid #e2e8f0;
    font-size: 0.95rem;
    color: #1e293b;
  }

  .leave-history th {
    background-color: #f1f5f9;
    color: #0f172a;
    font-weight: 600;
  }

  /* Buttons */
 
/* Primary Button - For general actions */
.primary-btn {
  background-color: #1e3a8a;
  color: #ffffff;
  padding: 12px 16px;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.primary-btn:hover {
  background-color: #1e40af;
}

/* Cancel Button */
.cancel-btn {
  background-color: transparent;
  color: #ef4444;
  padding: 8px 14px;
  border: 1px solid #ef4444;
  border-radius: 6px;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.cancel-btn:hover {
  background-color: #fee2e2;
}

/* Check Recommendation Button - Blue */
.check-btn {
  background-color: transparent;
  color: #2563eb;
  padding: 8px 14px;
  border: 1px solid #2563eb;
  border-radius: 6px;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.check-btn:hover {
  background-color: #dbeafe;
}

/* Approve Button - Green */
.approve-btn {
  background-color: transparent;
  color: #16a34a;
  padding: 8px 14px;
  border: 1px solid #16a34a;
  border-radius: 6px;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.approve-btn:hover {
  background-color: #dcfce7;
}

/* Reject Button - Red/Orange */
.reject-btn {
  background-color: transparent;
  color: #dc2626;
  padding: 8px 14px;
  border: 1px solid #dc2626;
  border-radius: 6px;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.reject-btn:hover {
  background-color: #fee2e2;
}

<!-- Status color -->

.status-approved {
  color: #57C785;
  font-weight: bold;
}

.status-pending {
  color: #1E90FF;
  font-weight: bold;
}

.status-cancelled {
  color: red;
  font-weight: bold;
}

.status-default {
  color: gray;
  font-weight: bold;
}
  /* Form Section */
  .form-section {
    background-color: #ffffff;
    padding: 32px;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
    max-width: 600px;
    margin: 0 auto;
  }

  .form-section h3 {
    font-size: 1.5rem;
    color: #1e3a8a;
    margin-bottom: 24px;
    text-align: center;
  }

  .form-group {
    margin-bottom: 20px;
    display: flex;
    flex-direction: column;
  }

  .form-group label {
    font-size: 0.95rem;
    color: #334155;
    margin-bottom: 6px;
  }

  .input-field {
    padding: 10px 12px;
    border: 1px solid #d1d5db;
    border-radius: 8px;
    font-size: 1rem;
    background-color: #f9fafb;
  }

  .input-field:focus {
    outline: none;
    border-color: #1e3a8a;
    background-color: #ffffff;
  }

  .value-display {
    font-size: 1rem;
    color: #111827;
    background-color: #f3f4f6;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    padding: 10px 12px;
  }

  .helper-text {
    font-size: 0.85rem;
    color: #6b7280;
    margin-top: 4px;
  }

  /* 3rd page CSS Lead view */

  .team-requests {
  background-color: #ffffff;
  padding: 32px;
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  max-width: 100%;
  overflow-x: auto;
  margin: 0 auto;
}

.team-requests h3 {
  font-size: 1.5rem;
  color: #1e3a8a;
  margin-bottom: 20px;
  font-weight: 600;
  text-align: center;
}

.table-container {
  overflow-x: auto;
}

.team-table {
  width: 100%;
  border-collapse: collapse;
  min-width: 800px;
}

.team-table th,
.team-table td {
  padding: 14px 12px;
  text-align: left;
  font-size: 0.95rem;
  border-bottom: 1px solid #e5e7eb;
}

.team-table th {
  background-color: #f1f5f9;
  color: #1e293b;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.team-table td {
  color: #334155;
}

.team-table tr:hover {
  background-color: #f9fafb;
  transition: background-color 0.2s ease;
}

@media (max-width: 768px) {
  .team-requests {
    padding: 24px;
  }

  .team-table th,
  .team-table td {
    padding: 10px 8px;
  }
}


  @media (max-width: 768px) {
    .cards {
      flex-direction: column;
    }

    .sidebar {
      width: 200px;
      padding: 16px;
    }

    .main {
      padding: 24px;
    }
  }

  @media (max-width: 480px) {
    .sidebar {
      display: none;
    }

    .main {
      padding: 16px;
    }

    .card h2 {
      font-size: 1.6rem;
    }

    .leave-history table {
      font-size: 0.85rem;
    }
  }
</style>


  </head>
  <body>
       <div class="sidebar">
      <div class="user-profile">
        <div class="user-icon" id="user-icon"><span id="user-initials"></span></div>
        <div class="user-email" id="user-email">Loading...</div>
      </div>
      <ul class="menu">
        <li class="active" onclick="showView('dashboard')">Your Dashboard</li>
        <li onclick="showView('new-request')">New Request</li>
        <li onclick="showView('your-team')">Your Team</li>
      </ul>
    </div>



       <div class="main">
      <!-- Dashboard View -->
     <div id="dashboard-view">
        <div class="cards">
          <div class="card">
            <h2 id="compOffs">0</h2>
            <p>Comp-Offs Available</p>
          </div>
          <div class="card">
            <h2 id="totalLeaves">0</h2>
            <p>Total Leaves Taken</p>
            <p>(Last <span id="lookBackPeriod">XX</span> days)</p>
          </div>
        </div>

        <div class="leave-history">
          <h3>Your Leave History</h3>
          <div style="overflow-x:auto;">
            <table>
              <thead>
                <tr>
                  <th>Request ID</th>
                  <th>From</th>
                  <th>To</th>
                  <th>Reason</th>
                  <th>Comp off used</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="historyBody"></tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- New Request View -->
 <div id="new-request-view" style="display: none;">
  <div class="form-section">
    <h3>Apply for Leave</h3>

    <div class="form-group">
      <label for="from-date">From Date</label>
      <input type="date" id="from-date" class="input-field" />
    </div>

    <div class="form-group">
      <label for="to-date">To Date</label>
      <input type="date" id="to-date" class="input-field" disabled />
    </div>

    <div class="form-group">
      <label>Number of Days</label>
      <div class="value-display" id="no-of-days">0</div>
    </div>

    <div class="form-group">
      <label for="reason">Reason</label>
      <textarea id="reason" class="input-field" rows="3" placeholder="Brief reason for leave..."></textarea>
    </div>

    <div class="form-group">
      <label for="comp-off">Comp-Offs to Use</label>
      <input type="number" id="comp-off" min="0" max="availableCompOffs" class="input-field" />
      <small class="helper-text">Available: <span id="comp-off-available-count">0</span></small>
    </div>

    <button id="submit-request-btn" onclick="submitRequest()" class="primary-btn">Submit Request</button>
  </div>
</div>


      <!-- Your Team View -->
    <div id="your-team-view" style="display: none;">
  <div class="team-requests">
    <h3>Team Leave Requests</h3>
    <div class="table-container">
      <table class="team-table">
        <thead>
          <tr>
            <th>Request ID</th>
            <th>Email</th>
            <th>From</th>
            <th>To</th>
            <th>Reason</th>
            <th>Comp Off Used</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="teamRequestsBody"></tbody>
      </table>
    </div>
  </div>
</div>

    </div>
    </div>

    <script>
      let userEmail = "";
      let availableCompOffs = 0;
      let newRequestFromDate = "";
      let newRequestToDate = "";
      let newRequestNumberOfDays = 0;

      document
        .getElementById("from-date")
        .addEventListener("change", function () {
          newRequestFromDate = this.value;
          console.log("selected from date ", newRequestFromDate);
          const toDateInput = document.getElementById("to-date");

          if (newRequestFromDate) {
            toDateInput.disabled = false;
            toDateInput.min = newRequestFromDate;
            // Optional: Clear old value if it's before fromDate
            if (toDateInput.value && toDateInput.value < newRequestFromDate) {
              toDateInput.value = "";
            }
          } else {
            toDateInput.disabled = true;
            toDateInput.value = "";
          }
        });
      document
        .getElementById("to-date")
        .addEventListener("change", function () {
          newRequestToDate = this.value;
          console.log("selected to date ", newRequestToDate);
          google.script.run
            .withSuccessHandler(function (daysCount) {
              newRequestNumberOfDays = daysCount;
              document.getElementById("no-of-days").textContent =
                newRequestNumberOfDays;
            })
            .calculateLeaveDays(newRequestFromDate, newRequestToDate); //YYYY-MM-DD
        });

      function getInitials(email) {
        console.log(`getting initials for email ${email}`);
        if (!email) return "";
        const name = email.split("@")[0];
        const parts = name.replace(/\d+/g, "").split(/[._-]/); // handles first.last, first_last, etc.
        const initials = parts
          .slice(0, 2)
          .map((p) => p.charAt(0).toUpperCase())
          .join("");
        return initials || name.charAt(0).toUpperCase();
      }

      function getColorFromInitials(initials) {
        console.log(`getting color for ${initials}`);
        const colors = [
          "#1abc9c",
          "#3498db",
          "#e67e22",
          "#9b59b6",
          "#f39c12",
          "#e74c3c",
          "#2ecc71",
        ];
        let hash = 0;
        for (let i = 0; i < initials.length; i++) {
          hash += initials.charCodeAt(i);
        }
        return colors[hash % colors.length];
      }

      // Fetch user email from server and invoke loadDashboard
      google.script.run
        .withSuccessHandler(function (email) {
          console.log(`successfully fetched email ${email}`);
          userEmail = email;
          document.getElementById("user-email").textContent = email;
          const initials = getInitials(email);
          document.getElementById("user-initials").textContent = initials;
          document.getElementById("user-icon").style.backgroundColor =
            getColorFromInitials(initials);
          loadDashboard();
        })
        .getUserEmail();

      function loadDashboard() {
        console.log(`Will load dashboard data for user ${userEmail}`);
        google.script.run
          .withSuccessHandler(renderDashboard)
          .getDashboardData(userEmail);
      }

  function renderDashboard(data) {
  console.log("data", data);
  availableCompOffs = data.compOffs;
  document.getElementById("compOffs").textContent = availableCompOffs;
  document.getElementById("totalLeaves").textContent = data.approvedLeavesCount;
  document.getElementById("lookBackPeriod").textContent = data.lookBackPeriod;

  const tbody = document.getElementById("historyBody");
  tbody.innerHTML = "";

  data.leavesHistory.forEach((item) => {
    console.log("Leave item: ", item);
    const tr = document.createElement("tr");

    console.log(item.Status.toLowerCase())
    let statusClass = "";
    switch (item.Status.toLowerCase()) {
      case "approved":
        statusClass = "status-approved";
        break;
      case "pending":
        statusClass = "status-pending";
        break;
      case "cancelled":
        statusClass = "status-cancelled";
        break;
      default:
        statusClass = "status-default";
    }

    let cancelButtonHTML = "";
    if (item.Status === "Pending") {
      cancelButtonHTML = `<button class="cancel-btn" onclick="cancelLeaveRequest('${item.Request_Id}')">Cancel</button>`;
    }
    console.log(`statusClass: ${statusClass}`)
    tr.innerHTML = `
      <td>${item.Request_Id}</td>
      <td>${item.From}</td>
      <td>${item.To}</td>
      <td>${item.Reason}</td>
      <td>${item.Comp_off}</td>
      <td><span class="${statusClass}">${item.Status}</span></td>
      <td>${cancelButtonHTML}</td>
    `;
    tbody.appendChild(tr);
  });
}


      function setAvailableCompOffs(availableCompOffs) {
        const input = document.getElementById("comp-off");
        const label = document.getElementById("comp-off-available-count");

        input.max = availableCompOffs;
        label.textContent = availableCompOffs;
      }
      const form = document.getElementById("leave-request-form");
      const submitBtn = document.getElementById("submit-request-btn");

      function submitRequest() {
        const fromDateStr = document.getElementById("from-date").value;
        const toDateStr = document.getElementById("to-date").value;
        const compOffs = parseInt(
          document.getElementById("comp-off").value || "0",
          10
        );
        const reason = document.getElementById("reason").value.trim();

        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        const fromDate = new Date(fromDateStr);
        const toDate = new Date(toDateStr);
        console.log("validating the form");

        // Validation 1: Email is valid
        if (!emailPattern.test(userEmail)) {
          alert("Invalid email address.");
          return;
        }

        // Validation 2: From Date should be before or equal to To Date
        if (!fromDateStr || !toDateStr || fromDate > toDate) {
          alert("From Date must be before or same as To Date.");
          return;
        }

        // Validation 3: Reason should not be empty
        if (!reason) {
          alert("Please enter a reason for the leave.");
          return;
        }

        // Validation 4: Comp-off <= number of leave days (excluding weekends/holidays if applicable)
        if (compOffs > newRequestNumberOfDays) {
          alert(
            `Comp-off used (${compOffs}) cannot exceed total leave days (${newRequestNumberOfDays}).`
          );
          return;
        }

        // All validations passed, submit
        const formData = {
          email: userEmail,
          fromDate: fromDateStr,
          toDate: toDateStr,
          reason: reason,
          days: newRequestNumberOfDays,
          compOffs: compOffs,
        };

        google.script.run
          .withSuccessHandler(() => {
            alert("Request submitted successfully.");
            showView("dashboard");
            loadDashboard();
          })
          .submitLeaveRequest(formData);
      }
      function cancelLeaveRequest(requestId) {
        if (!confirm("Are you sure you want to cancel this leave request?"))
          return;

        google.script.run
          .withSuccessHandler(() => {
            alert("Leave request canceled.");
            loadDashboard(); // Refresh data
          })
          .cancelLeaveRequestByUser(userEmail, requestId);
      }

      function showView(viewId) {
        document
          .querySelectorAll(".main > div")
          .forEach((div) => (div.style.display = "none"));
        document.getElementById(viewId + "-view").style.display = "block";

        document
          .querySelectorAll(".menu li")
          .forEach((li) => li.classList.remove("active"));
        const index = { dashboard: 0, "new-request": 1, "your-team": 2 }[
          viewId
        ];
        document.querySelectorAll(".menu li")[index].classList.add("active");

        if (viewId === "your-team") {
          console.log("Fetching team's leave requests for TL: ", userEmail);
          google.script.run
            .withSuccessHandler(renderTeamRequests)
            .getTeamRequests(userEmail);
        }
        if (viewId === "new-request") {
          setAvailableCompOffs(availableCompOffs);
        }
      }

function renderTeamRequests(data) {
  console.log("Received team's leave requests ", data);

  const tbody = document.getElementById("teamRequestsBody");
  tbody.innerHTML = "";

  data.forEach((item) => {
    const tr = document.createElement("tr");

    //  Add status class based on status value
    let statusClass = "";
    switch (item.Status.toLowerCase()) {
      case "Approved":
        statusClass = "status-approved";
        break;
      case "pending":
        statusClass = "status-pending";
        break;
      case "cancelled":
        statusClass = "status-cancelled";
        break;
      default:
        statusClass = "status-default";
    }

    // Buttons only if status is pending
    let approveButtonHTML = "";
    let rejectButtonHTML = "";
    let checkRecommendationButtonHTML = "";

    if (item.Status === "Pending") {
      approveButtonHTML = `<button class="approve-btn" onclick="approveLeaveRequest('${item.Request_Id}', '${item.Email}')">Approve</button>`;
      rejectButtonHTML = `<button class="reject-btn" onclick="rejectLeaveRequest('${item.Request_Id}', '${item.Email}')">Reject</button>`;
      checkRecommendationButtonHTML = `<button class="check-btn" onclick="checkRecommendationLeaveRequest('${item.Request_Id}', '${item.Email}')">Check recommendation</button>`;
    }

    // Row content
    tr.innerHTML = `
      <td>${item.Request_Id}</td>
      <td>${item.Email}</td>
      <td>${item.From}</td>
      <td>${item.To}</td>
      <td>${item.Reason}</td>
      <td>${item.Comp_off}</td>
      <td><span class="${statusClass}">${item.Status}</span></td>
      <td>
        <div style="display: flex; gap: 10px;">
          ${checkRecommendationButtonHTML}
          ${approveButtonHTML}
          ${rejectButtonHTML}
        </div>
      </td>
    `;

    tbody.appendChild(tr);
  });
}


      function approveLeaveRequest(requestId, memberEmail) {
        if (!confirm("Are you sure you want to approve this leave request?"))
          return;

        google.script.run
          .withSuccessHandler(() => {
            alert("Leave request canceled.");
            loadDashboard(); // Refresh data
          })
          .approveLeaveRequest(memberEmail, requestId);
      }

      function rejectLeaveRequest(requestId, memberEmail) {
        if (!confirm("Are you sure you want to reject this leave request?"))
          return;

        google.script.run
          .withSuccessHandler(() => {
            alert("Leave request canceled.");
            loadDashboard(); // Refresh data
          })
          .rejectLeaveRequest(memberEmail, requestId);
      }

      function checkRecommendationLeaveRequest(requestId, memberEmail) {
        showLoader("Checking recommendation...");
        google.script.run
          .withSuccessHandler((recomm) => {
            hideLoader();
            console.log("Recommendation: ", recomm);
            if (recomm.success) {
              showRecommendationModal(recomm.message);
            } else {
              alert(
                "Error: " + (recomm.error || "Unable to fetch recommendation.")
              );
            }
          })
          .withFailureHandler((err) => {
            hideLoader();
            console.error(err);
          })
          .getLeaveRecommendation(requestId);
      }

      function showRecommendationModal(data) {
        document.getElementById("recommendationOverall").textContent =
          data.summary.overall;
        document.getElementById("recommendationNote").textContent =
          data.summary.note;

        const tbody = document.getElementById("recommendationBreakdownBody");
        tbody.innerHTML = "";

        data.breakdown.forEach((day) => {
          const tr = document.createElement("tr");
          const isApproved = day.recommendation === "Approved";
          tr.style.backgroundColor = isApproved ? "#dcfce7" : "#fee2e2"; // green / red
          tr.style.color = "#111";

          tr.innerHTML = `
            <td style="padding:8px; border: 1px solid #ccc;">${day.date}</td>
            <td style="padding:8px; border: 1px solid #ccc;">${day.dayType}</td>
            <td style="padding:8px; border: 1px solid #ccc;">${day.availableStaff}/${day.totalStaff}</td>
            <td style="padding:8px; border: 1px solid #ccc;">${day.recommendation}</td>
            <td style="padding:8px; border: 1px solid #ccc;">${day.reason}</td>
          `;
          tbody.appendChild(tr);
        });

        document.getElementById("recommendationModal").style.display = "flex";
      }

      function hideRecommendationModal() {
        document.getElementById("recommendationModal").style.display = "none";
      }

      function showLoader(message = "Loading...") {
        document.getElementById("loaderText").textContent = message;
        document.getElementById("loaderModal").style.display = "flex";
      }

      function hideLoader(delay = 300) {
        setTimeout(() => {
          document.getElementById("loaderModal").style.display = "none";
        }, delay);
      }
    </script>
    <!-- Recommendation Modal -->
    <div
      id="recommendationModal"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.4);
        z-index: 9999;
        align-items: center;
        justify-content: center;
      "
    >
      <div
        style="
          background: white;
          padding: 30px;
          border-radius: 12px;
          width: 90%;
          max-width: 600px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
          position: relative;
        "
      >
        <span
          onclick="hideRecommendationModal()"
          style="
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 18px;
            cursor: pointer;
          "
          >&times;</span
        >
        <h3 style="margin-top: 0">Leave Recommendation Summary</h3>
        <p>
          <strong>Overall:</strong> <span id="recommendationOverall"></span>
        </p>
        <p><strong>Note:</strong> <span id="recommendationNote"></span></p>
        <table style="width: 100%; border-collapse: collapse; margin-top: 20px">
          <thead>
            <tr style="background: #f1f5f9">
              <th style="padding: 8px; border: 1px solid #ccc">Date</th>
              <th style="padding: 8px; border: 1px solid #ccc">Day Type</th>
              <th style="padding: 8px; border: 1px solid #ccc">Availability</th>
              <th style="padding: 8px; border: 1px solid #ccc">
                Recommendation
              </th>
              <th style="padding: 8px; border: 1px solid #ccc">Reason</th>
            </tr>
          </thead>
          <tbody id="recommendationBreakdownBody"></tbody>
        </table>
      </div>
    </div>

    <!-- Modal Loader -->
    <div
      id="loaderModal"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.4);
        z-index: 9999;
        align-items: center;
        justify-content: center;
      "
    >
      <div
        style="
          background: white;
          padding: 30px 40px;
          border-radius: 12px;
          text-align: center;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        "
      >
        <div
          class="spinner"
          style="
            margin: auto;
            width: 40px;
            height: 40px;
            border: 5px solid #e2e8f0;
            border-top: 5px solid #1d4ed8;
            border-radius: 50%;
            animation: spin 1s linear infinite;
          "
        ></div>
        <p id="loaderText" style="margin-top: 16px; font-weight: 500">
          Loading...
        </p>
      </div>
    </div>

    <style>
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
  </body>
</html>
